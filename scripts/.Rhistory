---
title: "Assessment 3 Alicia Phan"
file.exists("plots/histogram_age.png")
file.exists("/plots/histogram_age.png")
file.exists("bios640_week4/plots/histogram_age.png")
file.exists("bios640_week4/plots/histogram_age.png")
file.exists("plots/histogram_age.png")
file.exists("plots/histogram_age.png")
pacman::p_load(rio, here, tidyverse, dplyr, RColorBrewer, cowplot, ggpubr, gghighlight, grid, scales, skimr, DT, flexdashboard)
pacman::p_load(rio, here, tidyverse, dplyr, RColorBrewer, cowplot, ggpubr, gghighlight, grid, scales, skimr, DT, flexdashboard)
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(rio, here, tidyverse, dplyr, RColorBrewer, cowplot, ggpubr, gghighlight, grid, scales, skimr, DT, flexdashboard, shiny)
nhanes_data <- import(here("data", "cleaned_NHANES.csv"))
```{r knit, include=FALSE, eval=FALSE}
```{r knit, include=FALSE, eval=FALSE}
rmarkdown::render(
input = "nhanes_dashboard.Rmd",
output_dir = "../outputs"
)
rmarkdown::render(
input = "nhanes_dashboard.Rmd",
output_dir = "../outputs"
)
rmarkdown::render(
input = "nhanes_dashboard.Rmd",
output_dir = "../outputs"
)
nhanes_data <- import(here("data", "cleaned_NHANES.csv"))
pacman::p_load(rio, here, tidyverse, dplyr, RColorBrewer, cowplot, ggpubr, gghighlight, grid, scales, skimr, DT, flexdashboard, shiny)
nhanes_data <- import(here("data", "cleaned_NHANES.csv"))
View(nhanes_data)
View(nhanes_data)
View(nhanes_data)
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(rio, here, tidyverse, dplyr, RColorBrewer, cowplot, ggpubr, gghighlight, grid, scales, skimr, DT, flexdashboard, shiny, kableExtra)
nhanes_data <- import(here("data", "cleaned_NHANES.csv"))
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(n = nrow(wave_id))
wave_data
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(n_count = nrow(wave_id))
wave_data
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(n_count = n())
wave_data
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(sample_size = n())
wave_data
row_perc_wave <- prop.table(wave_data, margin=1)*100
row_perc_wave <- prop.table(wave_data)*100
row_perc_wave
row_perc_wave <- prop.table(wave_data, margin = 1 )*100
row_perc_wave <- prop.table(wave_data, margin = 2 )*100
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(sample_size = n()) %>%
mutate(percentage_rows = sample_size*100/sum(sample_size))
wave_data
wave_data <- wave_data[order(-wave_data$wave_id)]
wave_data <- wave_data[order(-wave_data$wave_id),]
kable(wave_data, format = "latex")
wave_data
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(sample_size = n()) %>%
mutate(percentage_rows = sample_size*100/sum(sample_size))
wave_data <- wave_data[order(wave_data$wave_id),]
wave_data_table <- kable(wave_data, format = "latex")
wave_data
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(rio, here, tidyverse, dplyr, RColorBrewer, cowplot, ggpubr, gghighlight, grid, scales, skimr, DT, flexdashboard, shiny, kableExtra)
wave_data <- nhanes_data %>%
group_by(wave_id) %>%
summarise(sample_size = n()) %>%
mutate(percentage_rows = sample_size*100/sum(sample_size))
wave_data <- wave_data[order(wave_data$wave_id),]
wave_data_table <- kable(wave_data, format = "latex")
wave_data_table
wave_data_table
wave_data_table <- kable(wave_data, format = "html")
wave_data_table
View(nhanes_data)
wave_data_male <- nhanes_data %>%
group_by(gender) %>%
summarise(sample_size = n()) %>%
mutate(percentage_rows = sample_size*100/sum(sample_size))
wave_data_male <- wave_data[order(wave_data_male$wave_id),]
wave_data_male
```{r Number and percentage of gender, echo=FALSE}
wave_data_male <- nhanes_data %>%
group_by(gender,wave_id) %>%
summarise(sample_size = n()) %>%
mutate(percentage_rows = sample_size*100/sum(sample_size))
wave_data_male
wave_data_male <- nhanes_data %>%
group_by(wave_id, gender) %>%
summarise(sample_size = n(), .groups = "drop_last") %>%
mutate(percentage_rows = sample_size*100/sum(sample_size))
wave_data_male
wave_data_male <- nhanes_data %>%
group_by(wave_id, gender) %>%
summarise(sample_size = n(), .groups = "drop_last") %>%
mutate(percentage_rows = sample_size*100/sum(sample_size)) %>%
ungroup()
wave_male_table <- kable(wave_data_male, format = "latex",
booktabs = TRUE,
col.names = c("Wave", "Gender", "Sample size", "Percentage of wave")
)
wave_male_table <- wave_data_table %>%
kable_styling(
latex_options = "hold_position",
full_width = FALSE
) %>%
row_spec(which(wave_data_male$gender == "Male"), bold = TRUE, color = "blue")
wave_data_male <- nhanes_data %>%
group_by(wave_id, gender) %>%
summarise(sample_size = n(), .groups = "drop_last") %>%
mutate(percentage_rows = sample_size*100/sum(sample_size)) %>%
ungroup()
wave_male_table <- kable(wave_data_male, format = "latex",
booktabs = TRUE,
col.names = c("Wave", "Gender", "Sample size", "Percentage of wave")
)
wave_male_table
wave_data_male
wave_data_male <- nhanes_data %>%
group_by(wave_id, gender) %>%
summarise(sample_size = n(), .groups = "drop_last") %>%
mutate(percentage_rows = sample_size*100/sum(sample_size)) %>%
ungroup()
wave_male_table <- kable(wave_data_male, format = "latex",
booktabs = TRUE,
col.names = c("Wave", "Gender", "Sample size", "Percentage of wave")
)
wave_male_table <- wave_male_table %>%
kable_styling(
latex_options = "hold_position",
full_width = FALSE
) %>%
row_spec(which(wave_data_male$gender == "Male"), bold = TRUE, color = "blue")
wave_male_table
wave_data_eth<- nhanes_data %>%
group_by(wave_id, ethnicity_2) %>%
summarise(sample_size = n(), .groups = "drop_last") %>%
mutate(percentage_rows = sample_size*100/sum(sample_size)) %>%
ungroup()
wave_eth_table <- kable(wave_data_eth, format = "latex",
booktabs = TRUE,
col.names = c("Wave", "Ethnicity", "Sample size", "Percentage of wave")
)
wave_eth_table <- wave_eth_table %>%
kable_styling(
latex_options = "hold_position",
full_width = FALSE
)
wave_eth_table
nhanes_avg_bp <- nhanes_data %>%
mutate(
avg_sbp = rowMeans(
select(., systolic_bp1, systolic_bp2, systolic_bp3, systolic_bp4),
na.rm = TRUE
),
avg_sbp = if_else(
is.na(systolic1_blpres) & is.na(systolic2_blpres) & is.na(systolic3_blpres) & is.na(systolic4_blpres),
NA_real_,
avg_sbp
)
)
nhanes_avg_bp <- nhanes_data %>%
mutate(
avg_sbp = rowMeans(
select(., systolic_bp1, systolic_bp2, systolic_bp3, systolic_bp4),
na.rm = TRUE
),
avg_sbp = if_else(
is.na(systolic1_blpres) & is.na(systolic2_blpres) & is.na(systolic3_blpres) & is.na(systolic4_blpres),
NA_real_,
avg_sbp
)
)
nhanes_avg_bp <- nhanes_data %>%
mutate(
avg_sbp = rowMeans(
select(., systolic_bp_1, systolic_bp_2, systolic_bp_3, systolic_bp_4),
na.rm = TRUE
),
avg_sbp = if_else(
is.na(systolic1_blpres) & is.na(systolic2_blpres) & is.na(systolic3_blpres) & is.na(systolic4_blpres),
NA_real_,
avg_sbp
)
)
nhanes_avg_bp <- nhanes_data %>%
mutate(
avg_sbp = rowMeans(
select(., systolic_bp_1, systolic_bp_2, systolic_bp_3, systolic_bp_4),
na.rm = TRUE
),
avg_sbp = if_else(
is.na(systolic_bp_1) & is.na(systolic_bp_2) & is.na(systolic_bp_3) & is.na(systolic_bp_4),
NA_real_,
avg_sbp
)
)
summarise(nhanes_avg_bp)
nhanes_avg_bp
```{r Average systolic blood pressure, echo=TRUE}
nhanes_avg_bp <- nhanes_data %>%
mutate(
avg_sbp = rowMeans(
select(., systolic_bp_1, systolic_bp_2, systolic_bp_3, systolic_bp_4),
na.rm = TRUE
),
avg_sbp = if_else(
is.na(systolic_bp_1) & is.na(systolic_bp_2) & is.na(systolic_bp_3) & is.na(systolic_bp_4),
NA_real_,
avg_sbp
)
)
nhanes_avg_bp
nhanes_summary <- nhanes_avg_bp %>%
group_by(wave_id)
mutate(
min_bp = min(avg_sbp, na.rm = TRUE),
max_bp = max(avg_sbp, na.rm = TRUE),
median_bp = median(avg_sbp, na.rm = TRUE),
mean_bp = mean(avg_sbp, na.rm = TRUE),
std_bp = sd(avg_sbp, na.rm = TRUE)
)
nhanes_avg_bp <- nhanes_data %>%
mutate(
avg_sbp = rowMeans(
select(., systolic_bp_1, systolic_bp_2, systolic_bp_3, systolic_bp_4),
na.rm = TRUE
),
avg_sbp = if_else(
is.na(systolic_bp_1) & is.na(systolic_bp_2) & is.na(systolic_bp_3) & is.na(systolic_bp_4),
NA_real_,
avg_sbp
)
) %>%
select(patient_id, wave_id, avg_sbp)
nhanes_avg_bp
nhanes_summary <- nhanes_avg_bp %>%
group_by(wave_id)
mutate(
min_bp = min(avg_sbp, na.rm = TRUE),
max_bp = max(avg_sbp, na.rm = TRUE),
median_bp = median(avg_sbp, na.rm = TRUE),
mean_bp = mean(avg_sbp, na.rm = TRUE),
std_bp = sd(avg_sbp, na.rm = TRUE)
)
nhanes_summary <- nhanes_avg_bp %>%
group_by(wave_id) %>%
mutate(
min_bp = min(avg_sbp, na.rm = TRUE),
max_bp = max(avg_sbp, na.rm = TRUE),
median_bp = median(avg_sbp, na.rm = TRUE),
mean_bp = mean(avg_sbp, na.rm = TRUE),
std_bp = sd(avg_sbp, na.rm = TRUE)
)
nhanes_summary_table <- kable(nhanes_summary, format = "latex",
booktabs = TRUE)
nhanes_summary_table
nhanes_summary <- nhanes_avg_bp %>%
group_by(wave_id) %>%
summarise(
min_bp = min(avg_sbp, na.rm = TRUE),
max_bp = max(avg_sbp, na.rm = TRUE),
median_bp = median(avg_sbp, na.rm = TRUE),
mean_bp = mean(avg_sbp, na.rm = TRUE),
std_bp = sd(avg_sbp, na.rm = TRUE)
)
nhanes_summary
